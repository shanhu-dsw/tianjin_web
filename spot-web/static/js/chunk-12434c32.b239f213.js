(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12434c32"],{"103d":function(t,e,a){"use strict";a("7d22")},"2ad0":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-row",[a("el-col",[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-weight":"bold",color:"#016dbe"}},[t._v("督察报告")]),a("div",{staticClass:"pull-right"},[a("span",{staticStyle:{"font-size":"14px"}},[t._v("派出所：")]),a("el-select",{attrs:{placeholder:"被选择检查问题单位",filterable:""},on:{change:function(e){return t.deptSelChange(e)}},model:{value:t.department_uuid,callback:function(e){t.department_uuid=e},expression:"department_uuid"}},t._l(t.deptList,(function(t){return a("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})})),1)],1),a("div",{staticClass:"pull-right"},[a("span",{staticStyle:{"font-size":"14px"}},[t._v("时间范围：")]),a("el-date-picker",{staticStyle:{margin:"0 10px 0 10px"},attrs:{size:"small",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1)]),a("el-row",{staticStyle:{height:"220px"}},[a("el-col",{staticClass:"report-item",attrs:{span:4},nativeOn:{click:function(e){return t.openReport(1)}}},[a("img",{staticClass:"img",attrs:{src:t.word}}),a("span",{staticClass:"txt"},[t._v("“五位一体”大监督体系工作报告")])]),a("el-col",{staticClass:"report-item",attrs:{span:4},nativeOn:{click:function(e){return t.openReport(2)}}},[a("img",{staticClass:"img",attrs:{src:t.word}}),a("span",{staticClass:"txt"},[t._v("高发问题统计工作报告")])]),a("el-col",{staticClass:"report-item",attrs:{span:4},nativeOn:{click:function(e){return t.openReport(3)}}},[a("img",{staticClass:"img",attrs:{src:t.word}}),a("span",{staticClass:"txt"},[t._v("各业务警种检查统计报告")])]),a("el-col",{staticClass:"report-item",attrs:{span:4},nativeOn:{click:function(e){return t.openReport(4)}}},[a("img",{staticClass:"img",attrs:{src:t.word}}),a("span",{staticClass:"txt"},[t._v("各单位自查统计报告")])]),a("el-col",{staticClass:"report-item",attrs:{span:4},nativeOn:{click:function(e){return t.openReport(5)}}},[a("img",{staticClass:"img",attrs:{src:t.word}}),a("span",{staticClass:"txt"},[t._v("各单位反馈统计报告")])]),a("el-col",{staticClass:"report-item",attrs:{span:4},nativeOn:{click:function(e){return t.openReport(6)}}},[a("img",{staticClass:"img",attrs:{src:t.word}}),a("span",{staticClass:"txt"},[t._v("问题高发人员统计报告")])]),a("el-col",{staticClass:"report-item",staticStyle:{"padding-top":"20px"},attrs:{span:4},nativeOn:{click:function(e){return t.openReport(7)}}},[a("img",{staticClass:"img",attrs:{src:t.word}}),a("span",{staticClass:"txt"},[t._v("派出所自查和监督检查情况报告")])])],1)],1)],1)],1)],1)},n=[],s=(a("4de4"),a("d3b7"),a("b0c0"),a("9d9a")),r=a("21a6"),c={data:function(){return{word:a("dccb"),dateRange:[(new Date).getTime()-6048e5,new Date],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},department_uuid:"",department_name:"",deptList:[]}},mounted:function(){var t=this;Object(s["q"])({level:"2"}).then((function(e){console.log(e.array),t.deptList=e.array.filter((function(t){return"派出所"==t.type_name})),console.log(t.deptList)}))},methods:{openReport:function(t){var e=this;if(!this.dateRange||this.dateRange.length<1)this.$modal.msgError("请先选择报表的时间范围!");else if(7!=t||this.department_uuid){this.$modal.loading("正在生成报告..."),this.curReportType=t;var a="",i="";switch(t){case 1:i="getWuWeiYiTi",a="“五位一体”大监督体系工作报告";break;case 2:i="getGaoFaWenTi",a="高发问题统计工作报告";break;case 3:i="getDanWeiJianCha",a="业务警种检查统计报告";break;case 4:i="getDanWeiZiCha",a="各单位自查统计报告";break;case 5:i="getDanWeiFanKui",a="各单位反馈统计报告";break;case 6:i="getGaoFaRenYuan",a="问题高发人员统计报告";break;case 7:i="getPaiChuSuo",a="派出所自查和监督检查情况报告";break}var n=this;this.$modal.confirm("是否生成【"+a+"】？").then((function(){return n.getFile(i,a)})).then((function(){e.$modal.closeLoading()})).catch((function(){e.$modal.closeLoading()}))}else this.$modal.msgError("请先选择派出所!")},getFile:function(t,e){var a={};a.start_datetime=this.parseTime(this.dateRange[0],"{y}-{m}-{d}")+" 00:00:00",a.end_datetime=this.parseTime(this.dateRange[1],"{y}-{m}-{d}")+" 23:59:59",7==this.curReportType&&(a.department_uuid=this.department_uuid,a.department_name=this.department_name),Object(s["E"])(t,a).then((function(t){console.log(t.file_name);var a="http://17.62.1.11:9010/webapp/report_file/"+t.file_name;Object(r["saveAs"])(a,e+".docx")}))},deptSelChange:function(t){var e=this;console.log(t),this.department_uuid=t,console.log(this.deptList),this.department_name=this.deptList.filter((function(t){return t.uuid==e.department_uuid}))[0].name}}},o=c,l=(a("103d"),a("2877")),p=Object(l["a"])(o,i,n,!1,null,null,null);e["default"]=p.exports},"7d22":function(t,e,a){},dccb:function(t,e,a){t.exports=a.p+"static/img/word.8a797c98.png"}}]);