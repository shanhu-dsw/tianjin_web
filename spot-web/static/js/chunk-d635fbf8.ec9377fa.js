(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d635fbf8"],{"0a5c":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},n=[],r=a("313e"),s=a("feb2");a("817d");var l=3e3,o={mixins:[s["default"]],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"}},data:function(){return{chart:null}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=r["init"](this.$el,"macarons"),this.chart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},radar:{radius:"66%",center:["50%","42%"],splitNumber:8,splitArea:{areaStyle:{color:"rgba(127,95,132,.3)",opacity:1,shadowBlur:45,shadowColor:"rgba(0,0,0,.5)",shadowOffsetX:0,shadowOffsetY:15}},indicator:[{name:"Sales",max:1e4},{name:"Administration",max:2e4},{name:"Information Techology",max:2e4},{name:"Customer Support",max:2e4},{name:"Development",max:2e4},{name:"Marketing",max:2e4}]},legend:{left:"center",bottom:"10",data:["Allocated Budget","Expected Spending","Actual Spending"]},series:[{type:"radar",symbolSize:0,areaStyle:{normal:{shadowBlur:13,shadowColor:"rgba(0,0,0,.2)",shadowOffsetX:0,shadowOffsetY:10,opacity:1}},data:[{value:[5e3,7e3,12e3,11e3,15e3,14e3],name:"Allocated Budget"},{value:[4e3,9e3,15e3,15e3,13e3,11e3],name:"Expected Spending"},{value:[5500,11e3,12e3,15e3,12e3,12e3],name:"Actual Spending"}],animationDuration:l}]})}}},c=o,d=a("2877"),u=Object(d["a"])(c,i,n,!1,null,null,null);e["default"]=u.exports},"476c":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},n=[],r=a("313e"),s=a("feb2");a("817d");var l=2e3,o={mixins:[s["default"]],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},chartData:{type:Object,default:{xData:[],yData1:[],yData2:[]}}},data:function(){return{chart:null}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},watch:{chartData:{deep:!0,handler:function(t){this.setOptions(t)}}},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=r["init"](this.$el,"macarons"),this.setOptions(this.chartData)},setOptions:function(t){var e=t.xData,a=t.yData1,i=t.yData2;this.chart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{top:10,left:"2%",right:"2%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:e,axisTick:{alignWithLabel:!0},axisLabel:{interval:0,rotate:45}}],yAxis:[{type:"value",axisTick:{show:!1}}],series:[{name:"已反馈",type:"bar",stack:"vistors",barWidth:"60%",data:a,animationDuration:l},{name:"未反馈",type:"bar",stack:"vistors",barWidth:"60%",data:i,animationDuration:l}]})}}},c=o,d=a("2877"),u=Object(d["a"])(c,i,n,!1,null,null,null);e["default"]=u.exports},"7c12":function(t,e,a){t.exports=a.p+"static/img/info.e71b6270.png"},9288:function(t,e,a){},9488:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},n=[],r=(a("fb6a"),a("313e")),s=a("feb2");a("817d");var l=2e3,o={mixins:[s["default"]],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},chartData:{type:Object,default:{xData:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],yData:[79,52,200,334,390,330,220]}}},data:function(){return{chart:null}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},watch:{chartData:{deep:!0,handler:function(t){this.setOptions(t)}}},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=r["init"](this.$el,"macarons"),this.setOptions(this.chartData)},setOptions:function(t){var e=t.xData,a=t.yData;this.chart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{top:10,left:"2%",right:"2%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:e,axisTick:{alignWithLabel:!0},axisLabel:{interval:0,rotate:45,formatter:function(t){var e=t;return e.length>5&&(e=e.slice(0,5)+"...."),e}}}],yAxis:[{type:"value",axisTick:{show:!1}}],series:[{type:"bar",stack:"vistors",barWidth:"30%",data:a,animationDuration:l,itemStyle:{normal:{label:{show:!1,position:"bottom"}}}}]})}}},c=o,d=a("2877"),u=Object(d["a"])(c,i,n,!1,null,null,null);e["default"]=u.exports},"9d5f":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-row",{staticStyle:{padding:"10px","font-weight":"bold",color:"#016dbe"}},[t._v(" 统计信息 ")]),a("el-row",[a("div",{staticClass:"report"},[a("div",{staticClass:"report-left",staticStyle:{"margin-right":"20px"}},[a("img",{staticClass:"house",attrs:{src:t.house}}),a("div",{staticClass:"organization_configuration",staticStyle:{padding:"10px",width:"100%","min-height":"500px"}},[a("el-tree",{attrs:{"default-expand-all":!0,data:t.detpList2,props:t.defaultProps,"highlight-current":""},on:{"node-click":t.handleNodeClick}})],1)]),a("div",{staticClass:"report-left"},[a("div",{class:{"home-header-fixed":t.show},staticStyle:{display:"flex","flex-direction":"column","align-items":"center",width:"250px",background:"#fff"}},[a("span",{staticStyle:{"padding-top":"40px","font-size":"20px","font-weight":"bold"}},[t._v(t._s(t.selDept.name))]),a("img",{staticClass:"house2",attrs:{src:t.info}}),a("div",{staticStyle:{padding:"10px",width:"100%","min-height":"500px"}},[a("el-menu",{staticStyle:{width:"100%"},attrs:{"default-active":"1"}},[a("el-menu-item",{attrs:{index:"1"},on:{click:function(e){return t.quickTo(1)}}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("基本信息")])]),a("el-menu-item",{attrs:{index:"2"},on:{click:function(e){return t.quickTo(2)}}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("单位问题排行")])]),a("el-menu-item",{attrs:{index:"11"},on:{click:function(e){return t.quickTo(11)}}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("自查问题排行")])]),a("el-menu-item",{attrs:{index:"12"},on:{click:function(e){return t.quickTo(12)}}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("工作量排行")])]),a("el-menu-item",{attrs:{index:"7"},on:{click:function(e){return t.quickTo(7)}}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("问题整改率")])]),a("el-menu-item",{attrs:{index:"3"},on:{click:function(e){return t.quickTo(3)}}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("问题流量")])]),a("el-menu-item",{attrs:{index:"4"},on:{click:function(e){return t.quickTo(4)}}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("问题分类")])]),a("el-menu-item",{attrs:{index:"5"},on:{click:function(e){return t.quickTo(5)}}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("高发问题")])]),a("el-menu-item",{attrs:{index:"6"},on:{click:function(e){return t.quickTo(6)}}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("问题清单")])])],1)],1)])]),a("div",{staticClass:"report-right"},[a("div",{staticStyle:{background:"#fff",padding:"15px 20px 20px 20px"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择问题单位",filterable:"",clearable:"",disabled:t.deptDisabled},on:{change:t.selDeptChange},model:{value:t.selUUid,callback:function(e){t.selUUid=e},expression:"selUUid"}},t._l(t.deptList,(function(t){return a("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})})),1)],1),a("div",{attrs:{id:"div1"}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("基本信息")])]),a("el-descriptions",{attrs:{column:2}},[a("el-descriptions-item",{attrs:{span:4,label:"单位类型"}},[t._v(t._s(t.selDept.type_name))]),a("el-descriptions-item",{attrs:{label:"上级单位"}},[t._v(" "+t._s(t.selDept.parent_name)+" ")]),a("el-descriptions-item",{attrs:{label:"单位人数"}},[t._v(t._s(t.selDept.count))]),a("el-descriptions-item",{attrs:{span:4,label:"下级单位"}},[t._v(t._s(t.selDept.childDept))])],1),a("div",{staticStyle:{display:"flex","justify-content":"space-between",padding:"0 20px 0 20px"}},[a("div",{staticClass:"box1 img1"},[a("span",{staticStyle:{"font-size":"30px","font-weight":"bold"}},[t._v(t._s(t.count1)+"个")]),a("span",[t._v("检查问题总数")])]),a("div",{staticClass:"box1 img2"},[a("span",{staticStyle:{"font-size":"30px","font-weight":"bold"}},[t._v(t._s(t.count2)+"个")]),a("span",[t._v("自查问题总数")])]),a("div",{staticClass:"box1 img3"},[a("span",{staticStyle:{"font-size":"30px","font-weight":"bold"}},[t._v(t._s(t.rank))]),a("span",[t._v("单位排名")])])])],1)],1),a("div",{staticStyle:{"margin-top":"10px"},attrs:{id:"div2"}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("单位问题排行")]),a("div",{staticClass:"pull-right"},[a("el-select",{attrs:{size:"small",placeholder:"问题状态",clearable:""},model:{value:t.rtStatus1,callback:function(e){t.rtStatus1=e},expression:"rtStatus1"}},[a("el-option",{attrs:{label:"未反馈",value:"UN_FEEDBACK"}}),a("el-option",{attrs:{label:"已反馈",value:"FEEDBACK"}}),a("el-option",{attrs:{label:"已归档",value:"FILED"}})],1),a("el-date-picker",{staticStyle:{margin:"0 10px 0 10px"},attrs:{size:"small",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},model:{value:t.dateRange1,callback:function(e){t.dateRange1=e},expression:"dateRange1"}}),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.getReport1}},[t._v("统计")])],1)]),a("div",{staticStyle:{"font-size":"13px"}},t._l(t.rtList1,(function(e,i){return a("div",{key:i,staticStyle:{display:"flex","justify-content":"center","align-items":"center",padding:"10px 0 10px 0"}},[a("div",{class:t.getClass(i)},[a("span",[t._v(t._s(i+1))]),t._v(t._s(e.name)+" ")]),a("div",{staticStyle:{flex:"1"}},[a("el-progress",{attrs:{color:t.getColor(i),"show-text":!1,"stroke-width":15,percentage:e.percentage}})],1),a("div",{staticStyle:{"padding-left":"20px"}},[t._v(t._s(e.problem_count))])])})),0)])],1),a("div",{staticStyle:{"margin-top":"10px"},attrs:{id:"div11"}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("自查问题排行")]),a("div",{staticClass:"pull-right"},[a("el-date-picker",{staticStyle:{margin:"0 10px 0 10px"},attrs:{size:"small",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},model:{value:t.dateRange11,callback:function(e){t.dateRange11=e},expression:"dateRange11"}}),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.getReport11}},[t._v("统计")])],1)]),a("div",{staticStyle:{"font-size":"13px"}},t._l(t.rtList11,(function(e,i){return a("div",{key:i,staticStyle:{display:"flex","justify-content":"center","align-items":"center",padding:"10px 0 10px 0"}},[a("div",{class:t.getClass(i)},[a("span",[t._v(t._s(i+1))]),t._v(t._s(e.name)+" ")]),a("div",{staticStyle:{flex:"1"}},[a("el-progress",{attrs:{color:t.getColor(i),"show-text":!1,"stroke-width":15,percentage:e.percentage}})],1),a("div",{staticStyle:{"padding-left":"20px"}},[t._v(t._s(e.problem_count))])])})),0)])],1),a("div",{staticStyle:{"margin-top":"10px"},attrs:{id:"div12"}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("工作量排行")]),a("div",{staticClass:"pull-right"},[a("el-date-picker",{staticStyle:{margin:"0 10px 0 10px"},attrs:{size:"small",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},model:{value:t.dateRange12,callback:function(e){t.dateRange12=e},expression:"dateRange12"}}),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.getReport12}},[t._v("统计")])],1)]),a("div",{staticStyle:{"font-size":"13px"}},t._l(t.rtList12,(function(e,i){return a("div",{key:i,staticStyle:{display:"flex","justify-content":"center","align-items":"center",padding:"10px 0 10px 0"}},[a("div",{class:t.getClass(i)},[a("span",[t._v(t._s(i+1))]),t._v(t._s(e.name)+" ")]),a("div",{staticStyle:{flex:"1"}},[a("el-progress",{attrs:{color:t.getColor(i),"show-text":!1,"stroke-width":15,percentage:e.percentage}})],1),a("div",{staticStyle:{"padding-left":"20px"}},[t._v(t._s(e.count))])])})),0)])],1),a("div",{staticStyle:{"margin-top":"10px"},attrs:{id:"div7"}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("问题整改率")]),a("div",{staticClass:"pull-right"},[a("el-date-picker",{staticStyle:{margin:"0 10px 0 10px"},attrs:{size:"small",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},model:{value:t.dateRange2,callback:function(e){t.dateRange2=e},expression:"dateRange2"}}),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.getReport2(!1)}}},[t._v("统计")])],1)]),a("div",{staticClass:"chart-wrapper"},[a("bar-chart2",{attrs:{"chart-data":t.rtList2}})],1)])],1),a("div",{staticStyle:{"margin-top":"10px"},attrs:{id:"div3"}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("问题流量")]),a("div",{staticClass:"pull-right",staticStyle:{display:"flex"}},[a("ZMPicker",{ref:"liduPicker",on:{changeDate:t.changeDate}}),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.getReport6()}}},[t._v("统计")])],1)]),a("div",{staticClass:"chart-wrapper"},[a("line-chart",{attrs:{"chart-data":t.rtList6}})],1)])],1),a("div",{staticStyle:{"margin-top":"10px"},attrs:{id:"div4"}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("问题分类")]),a("div",{staticClass:"pull-right"},[a("el-date-picker",{staticStyle:{margin:"0 10px 0 10px"},attrs:{size:"small",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},model:{value:t.dateRange3,callback:function(e){t.dateRange3=e},expression:"dateRange3"}}),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.getReport3()}}},[t._v("统计")])],1)]),a("div",{staticClass:"chart-wrapper"},[a("pie-chart",{attrs:{"chart-data":t.rtList3}})],1)])],1),a("div",{staticStyle:{"margin-top":"10px"},attrs:{id:"div5"}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("高发问题")]),a("div",{staticClass:"pull-right"},[a("el-date-picker",{staticStyle:{margin:"0 10px 0 10px"},attrs:{size:"small",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},model:{value:t.dateRange4,callback:function(e){t.dateRange4=e},expression:"dateRange4"}}),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.getReport4(!1)}}},[t._v("统计")])],1)]),a("div",{staticClass:"chart-wrapper"},[a("bar-chart",{attrs:{"chart-data":t.rtList4}})],1)])],1),a("div",{staticStyle:{"margin-top":"10px"},attrs:{id:"div6"}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("问题清单")]),a("div",{staticClass:"pull-right"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.$router.push("/problem/list")}}},[t._v("更多")])],1)]),a("div",{staticClass:"chart-wrapper"},[a("el-table",{attrs:{data:t.rtList5}},[a("el-table-column",{attrs:{label:"问题编号",align:"center",prop:"number",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" #"+t._s(e.row.number)+" ")]}}])}),a("el-table-column",{attrs:{label:"问题状态",align:"center",prop:"status",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return["UN_FEEDBACK"==e.row.status?a("el-tag",{attrs:{type:"warning",effect:"dark"}},[t._v("未反馈")]):t._e(),"FEEDBACK"==e.row.status?a("el-tag",{attrs:{type:"success",effect:"dark"}},[t._v("已反馈")]):t._e(),"FILED"==e.row.status?a("el-tag",{attrs:{type:"info",effect:"dark"}},[t._v("已归档")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"问题类型",align:"center",prop:"problem_department_type_parent_name",width:"140","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"问题类别",align:"center",prop:"problem_department_type_name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"发生时间",align:"center",prop:"create_datetime",width:"180"}}),a("el-table-column",{attrs:{label:"问题单位",align:"center",prop:"department_name"}})],1)],1)])],1)])])])],1)},n=[],r=a("c7eb"),s=a("1da1"),l=a("2909"),o=a("b85c"),c=a("5530"),d=(a("4de4"),a("d3b7"),a("b0c0"),a("4ec9"),a("3ca3"),a("ddb0"),a("159b"),a("14d9"),a("4e82"),a("d81d"),a("fb6a"),a("a15b"),a("2f62")),u=a("ed36"),p=a.n(u),h=a("7c12"),m=a.n(h),f=a("0a5c"),g=a("d153"),v=a("9488"),y=a("eab4"),b=a("476c"),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{attrs:{inline:"",size:"medium"}},[a("el-form-item",{staticStyle:{"margin-bottom":"0px"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择",size:"small"},on:{change:t.changeSize},model:{value:t.lidu,callback:function(e){t.lidu=e},expression:"lidu"}},[a("el-option",{attrs:{label:"按日",value:1}}),a("el-option",{attrs:{label:"按周",value:2}}),a("el-option",{attrs:{label:"按月",value:3}})],1)],1),a("el-form-item",{staticStyle:{"margin-bottom":"0px"}},[a("el-date-picker",{staticStyle:{width:"300px"},attrs:{size:"small",type:3==t.lidu?"monthrange":"daterange",align:"left","unlink-panels":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","picker-options":t.pickerOptions,"value-format":"yyyy-MM-dd"},on:{change:t.changeDate,focus:t.setWeekClass},model:{value:t.datePicker,callback:function(e){t.datePicker=e},expression:"datePicker"}})],1)],1)},x=[],D=(a("a9e3"),a("c38a")),k={data:function(){return{lidu:1,datePicker:[],pickerOptions:{firstDayOfWeek:1,shortcuts:[]}}},methods:{changeSize:function(t){this.datePicker=[];var e=[],a=864e5,i=new Date,n=i-a;if(1==t){this.changeDate([i-7*a,i-a]);var r=this.setShortcut("昨日",n,n),s=i.getDay(),l=this.setShortcut("上周",i-a*(7+s),i-a*(1+s)),o=this.setShortcut("本月",(new Date).setDate(1),n),c=this.setShortcut("上月",new Date(i.getFullYear(),i.getMonth(),0).setDate(1),(new Date).setDate(0)),d=this.setShortcut("最近7天",i-7*a,n),u=this.setShortcut("最近15天",i-15*a,n),p=this.setShortcut("最近30天",i-31*a,n),h=this.setShortcut("最近90天",i-91*a,n);e.push(r,l,o,c,d,u,p,h)}if(2==t){this.changeDate([i-7*a,i-a]);var m=this.setShortcut("最近7天",i-7*a,n),f=this.setShortcut("最近30天",i-31*a,n),g=this.setShortcut("最近90天",i-91*a,n);e.push(m,f,g)}if(3==t){var v=new Date(i.getFullYear(),i.getMonth(),0).setDate(1);this.changeDate([v,v]);var y=this.setShortcut("上月",v,v),b=this.setShortcut("今年",new Date(i.getFullYear(),0),v),_=this.setShortcut("最近三个月",new Date(i.getFullYear(),i.getMonth()-3),v),x=this.setShortcut("最近六个月",new Date(i.getFullYear(),i.getMonth()-6),v);e.push(y,b,_,x)}this.pickerOptions.shortcuts=e},setShortcut:function(t,e,a){return{text:t,onClick:function(t){t.$emit("pick",[Object(D["i"])(new Date(e),"{y}-{m}-{d}"),Object(D["i"])(new Date(a),"{y}-{m}-{d}")])}}},changeDate:function(t){if(t){if(1==this.lidu&&(t=[Object(D["i"])(new Date(t[0]),"{y}-{m}-{d}"),Object(D["i"])(new Date(t[1]),"{y}-{m}-{d}")],this.datePicker=this.datePicker.length?this.datePicker:t),2==this.lidu){var e=864e5,a=(new Date,new Date(t[0])),i=new Date(t[1]),n=0==a.getDay()?6:a.getDay()-1,r=0==i.getDay()?6:i.getDay()-1,s=13-(new Date).getDay(),l=new Date-e*s,o=0==(new Date).getDay()?7:(new Date).getDay(),c=new Date-e*o,d=[];d[0]=Number(a)-e*n>Number(l)?Number(l):Number(a)-e*n,d[1]=Number(i)+e*(6-r)>Number(c)?Number(c):Number(i)+e*(6-r),this.datePicker=[Object(D["i"])(new Date(d[0]),"{y}-{m}-{d}"),Object(D["i"])(new Date(d[1]),"{y}-{m}-{d}")]}if(3==this.lidu){var u=new Date(t[1]);u.setMonth(u.getMonth()+1);var p=u.setDate(0);this.datePicker=[Object(D["i"])(new Date(t[0]),"{y}-{m}-{d}"),Object(D["i"])(new Date(p),"{y}-{m}-{d}")]}this.$emit("changeDate",this.lidu,this.datePicker)}},setWeekClass:function(t){2==this.lidu&&t.picker&&"el-date-table is-week-mode"!=t.picker.$children[0].$el.className?t.picker.$children.forEach((function(t){t.$el.className="el-date-table is-week-mode"})):2!=this.lidu&&t.picker&&"el-date-table is-week-mode"==t.picker.$children[0].$el.className&&t.picker.$children.forEach((function(t){t.$el.className="el-date-table"}))}},mounted:function(){this.changeSize(1)}},w=k,S=a("2877"),L=Object(S["a"])(w,_,x,!1,null,null,null),R=L.exports,C=a("9d9a"),O={computed:Object(c["a"])({},Object(d["b"])(["admin","noRead"])),components:{RaddarChart:f["default"],PieChart:g["default"],BarChart:v["default"],LineChart:y["default"],BarChart2:b["default"],ZMPicker:R},mounted:function(){window.addEventListener("scroll",this.showSearch)},data:function(){return{house:p.a,info:m.a,show:!1,defaultProps:{children:"children",label:"name"},deptDisabled:!1,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},deptList:[],detpList2:[],selDept:{name:"",type_name:"",parent_name:"",childDept:"",managerUser:"",count:""},selUUid:"",rtStatus1:"",dateRange1:[],rtList1:[],dateRange2:[],rtList2:{xData:[],yData1:[],yData2:[]},dateRange3:[],rtList3:[],dateRange4:[],rtList4:{xData:[],yData:[]},rtList5:[],dataType:1,dateRange6:[],rtList6:{xData:[],yData:[]},problemTypeList:[],deptProblemList:[],count1:0,count2:0,rank:"",dateRange11:[],rtList11:[],dateRange12:[],rtList12:[]}},created:function(){var t=this;this.getProblemType(),this.getReport1().then((function(e){t.getReport2(!0),t.getReport11(),t.getReport12()})),this.getDepartmentList().then((function(e){t.getReport5(),t.getReportNew()}))},methods:{getColor:function(t){return t<=2?"#DE6F6D":t<=7?"#5A70C1":"#A1CC83"},getClass:function(t){return t<=2?{rank1:!0}:t<=7?{rank2:!0}:{rank3:!0}},showSearch:function(){var t=document.documentElement.scrollTop;this.show=t>300},quickTo:function(t){this.$el.querySelector("#div"+t).scrollIntoView({block:"start",behavior:"smooth"})},handleNodeClick:function(t){t.children||this.selDeptChange(t.uuid)},changeDate:function(t,e){this.dataType=t,this.dateRange6=e},getProblemType:function(){var t=this;Object(C["A"])().then((function(e){t.problemTypeList=e.array.filter((function(t){return 1==t.level}))}))},getDepartmentList:function(){var t=this;return new Promise((function(e){var a={level:2};"fu_jing"!=t.admin.role_name&&"min_jing"!=t.admin.role_name&&"zd_leader"!=t.admin.role_name&&"zd_admin"!=t.admin.role_name&&"department_admin"!=t.admin.role_name||(a.uuid=t.admin.department_uuid2),Object(C["q"])(a).then((function(a){t.deptList=a.array;var i,n=t.deptList[0].parent_array[0].name,r=new Map,s=Object(o["a"])(t.deptList);try{for(s.s();!(i=s.n()).done;){var c=i.value;r.set(c.type_name,c.type_name)}}catch(p){s.e(p)}finally{s.f()}var d=Object(l["a"])(r.values()),u={name:n,children:[]};d.forEach((function(e){var a={name:e,children:t.deptList.filter((function(t){return t.type_name==e}))};u.children.push(a)})),t.detpList2.push(u),1==t.deptList.length&&(t.selUUid=t.deptList[0].uuid,t.deptDisabled=!0,t.getDeptDetail(t.selUUid)),e("next")}))}))},getReport00:function(){var t=this;return new Promise((function(e){if(t.deptProblemList.length>0)return e("next");var a={level:2};Object(C["r"])(a).then((function(a){return t.deptProblemList=a.array,t.deptProblemList.sort(t.sortBy("problem_count")),e("next")}))}))},getReport0:function(){var t=this;if(this.count1=0,this.count2=0,this.selUUid){for(var e=0;e<this.deptProblemList.length;e++)if(this.deptProblemList[e].uuid==this.selUUid){this.rank=e+1;break}var a={offset:0,rows:1,from_department_uuid:this.selUUid,problem_type:"CHECK"};Object(C["C"])(a).then((function(e){t.count1=e.count}));var i={offset:0,rows:1,from_department_uuid:this.selUUid,problem_type:"SELF"};Object(C["C"])(i).then((function(e){t.count2=e.count}))}},getReport1:function(){var t=this;return new Promise((function(e){var a={level:2};t.dateRange1.length>0&&(a.start_create_datetime=t.parseTime(t.dateRange1[0],"{y}-{m}-{d}")+" 00:00:00",a.end_create_datetime=t.parseTime(t.dateRange1[1],"{y}-{m}-{d}")+" 23:59:59"),t.rtStatus1&&(a.status=t.rtStatus1),Object(C["r"])(a).then((function(a){t.rtList1=a.array,t.rtList1.sort(t.sortBy("problem_count")),t.rtList1.forEach((function(e){e.percentage=e.problem_count/t.rtList1[0].problem_count*100})),e("next")}))}))},getReport2:function(t){var e=this,a={level:2};if(this.dateRange2.length>0&&(a.start_create_datetime=this.parseTime(this.dateRange2[0],"{y}-{m}-{d}")+" 00:00:00",a.end_create_datetime=this.parseTime(this.dateRange2[1],"{y}-{m}-{d}")+" 23:59:59"),t){var i=Object(l["a"])(this.rtList1);a.status="UN_FEEDBACK",Object(C["r"])(a).then((function(t){var a=t.array;e.handlerReport2(i,a)}))}else Object(C["r"])(a).then((function(t){var i=t.array;a.status="UN_FEEDBACK",Object(C["r"])(a).then((function(t){var a=t.array;e.handlerReport2(i,a)}))}))},getReport11:function(){var t=this,e={level:2,order_group:"002"};this.dateRange11.length>0&&(e.start_create_datetime=this.parseTime(this.dateRange11[0],"{y}-{m}-{d}")+" 00:00:00",e.end_create_datetime=this.parseTime(this.dateRange11[1],"{y}-{m}-{d}")+" 23:59:59"),Object(C["r"])(e).then((function(e){t.rtList11=e.array,t.rtList11.sort(t.sortBy("problem_count")),t.rtList11.forEach((function(e){0==t.rtList11[0].problem_count?e.percentage=0:e.percentage=e.problem_count/t.rtList11[0].problem_count*100}))}))},getReport12:function(){var t=this,e={};this.dateRange11.length>0&&(e.start_create_datetime=this.parseTime(this.dateRange12[0],"{y}-{m}-{d}")+" 00:00:00",e.end_create_datetime=this.parseTime(this.dateRange12[1],"{y}-{m}-{d}")+" 23:59:59"),Object(C["s"])(e).then((function(e){t.rtList12=e.array,t.rtList12.sort(t.sortBy("count")),t.rtList12.forEach((function(e){e.percentage=e.count/t.rtList12[0].count*100}))}))},handlerReport2:function(t,e){t.forEach((function(t){e.forEach((function(e){t.uuid==e.uuid&&(t.feed_count=t.problem_count-e.problem_count,t.no_feed_count=e.problem_count,t.feed_rate=0==t.problem_count?0:t.feed_count/t.problem_count)}))})),t.sort(this.sortBy("feed_rate")),this.rtList2.xData=t.map((function(t){return t.name})),this.rtList2.yData1=t.map((function(t){return t.feed_count})),this.rtList2.yData2=t.map((function(t){return t.no_feed_count}))},getReportNew:function(){var t=this;return Object(s["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getReport3();case 2:return e.next=4,t.getReport00();case 4:t.getReport4(!0),t.getReport6(),t.getReport0();case 7:case"end":return e.stop()}}),e)})))()},getReport3:function(){var t=this;return new Promise((function(e){var a={};t.dateRange3.length>0&&(a.start_create_datetime=t.parseTime(t.dateRange3[0],"{y}-{m}-{d}")+" 00:00:00",a.end_create_datetime=t.parseTime(t.dateRange3[1],"{y}-{m}-{d}")+" 23:59:59"),t.selUUid&&(a.to_uuid=t.selUUid),Object(C["B"])(a).then((function(a){var i=a.array.filter((function(t){return 2==t.level&&t.problem_count>0}));t.rtList3=Object(l["a"])(i).map((function(t){"001"==t.order_group.slice(0,3)?t.name=t.name+"(检查问题)":t.name=t.name+"(自查问题)";var e={name:t.name,value:t.problem_count};return console.log(e),e})),t.rtList3.sort((function(t,e){return e.value-t.value})),t.rtList3=t.rtList3.slice(0,5),console.log(t.rtList3),e("next")}))}))},getReport4:function(t){var e=this,a={};if(this.dateRange4&&(a.start_create_datetime=this.parseTime(this.dateRange4[0],"{y}-{m}-{d}")+" 00:00:00",a.end_create_datetime=this.parseTime(this.dateRange4[1],"{y}-{m}-{d}")+" 23:59:59"),this.selUUid&&(a.to_uuid=this.selUUid),t){var i=Object(l["a"])(this.rtList3).sort(this.sortBy("value")).slice(0,10);this.rtList4.xData=i.map((function(t){return t.name})),this.rtList4.yData=i.map((function(t){return t.value}))}else Object(C["B"])(a).then((function(t){var a=t.array.filter((function(t){return 2==t.level}));a=a.sort(e.sortBy("problem_count")).slice(0,10),a.map((function(t){"001"==t.order_group.slice(0,3)?t.name=t.name+"(检查问题)":t.name=t.name+"(自查问题)"})),e.rtList4.xData=a.map((function(t){return t.name})),e.rtList4.yData=a.map((function(t){return t.problem_count}))}))},getReport5:function(){var t=this,e={offset:0,rows:10};this.selUUid&&(e.to_uuid=this.selUUid),e=Object(D["c"])(this.admin,e,!0),Object(C["C"])(e).then((function(e){t.rtList5=e.array}))},getReport6:function(){var t=this,e={};switch(this.dateRange3.length>0&&(e.start_create_datetime=this.parseTime(this.dateRange6[0],"{y}-{m}-{d}")+" 00:00:00",e.end_create_datetime=this.parseTime(this.dateRange6[1],"{y}-{m}-{d}")+" 23:59:59"),this.selUUid&&(e.to_uuid=this.selUUid),this.dataType){case 1:e.statistics_unit="DAY";break;case 2:e.statistics_unit="WEEK";break;case 3:e.statistics_unit="MONTH";break}Object(C["z"])(e).then((function(e){t.rtList6.xData=e.array.map((function(t){return t.datetime})),t.rtList6.yData=e.array.map((function(t){return t.count}))}))},sortBy:function(t){return function(e,a){return a[t]-e[t]}},getDeptDetail:function(t){var e=this,a=this.deptList.filter((function(e){return e.uuid==t}))[0];this.selDept.name=a.name,this.selDept.type_name=a.type_name,a.parent_array.length>0?this.selDept.parent_name=a.parent_array[0].name:this.selDept.parent_name="";var i={parent_uuid:t};Object(C["q"])(i).then((function(t){t.array.length>0?e.selDept.childDept=t.array.map((function(t){return t.name})).join(","):e.selDept.childDept=""}));var n={department_uuid:t,offset:0,rows:1e4};Object(C["n"])(n).then((function(t){e.selDept.count=t.array.length})),n.manage_department_uuid_like=t,Object(C["n"])(n).then((function(t){t.array.length>0?e.selDept.managerUser=t.array.map((function(t){return t.real_name+"("+t.name+")"})).join(","):e.selDept.managerUser=""}))},selDeptChange:function(t){t?(this.selUUid=t,this.getDeptDetail(t),this.getReport0()):this.selDept={name:"",type_name:"",parent_name:"",childDept:"",managerUser:"",count:""}}}},j=O,T=(a("c53b"),Object(S["a"])(j,i,n,!1,null,"44f4f071",null));e["default"]=T.exports},c53b:function(t,e,a){"use strict";a("9288")},d153:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},n=[],r=(a("d81d"),a("b0c0"),a("313e")),s=a("feb2");a("817d");var l={mixins:[s["default"]],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"500px"},chartData:{type:Array,default:[{value:1,name:"Gold"},{value:1,name:"Forecasts"}]}},data:function(){return{chart:null}},watch:{chartData:{deep:!0,handler:function(t){this.setOptions(t)}}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=r["init"](this.$el,"macarons"),this.setOptions(this.chartData)},setOptions:function(t){this.chart.setOption({tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},legend:{type:"scroll",orient:"vertical",right:20,top:0,data:t.map((function(t){return t.name})),formatter:function(t){var e="";return t.length>10?(e=t.substr(0,10)+"...",e):t}},series:[{type:"pie",roseType:"radius",radius:[15,95],center:["30%","50%"],data:t,animationEasing:"cubicInOut",animationDuration:2600,label:{show:!0,formatter:function(t){return t.name+"\n"+t.value+"个"}}}]})}}},o=l,c=a("2877"),d=Object(c["a"])(o,i,n,!1,null,null,null);e["default"]=d.exports},eab4:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},n=[],r=a("313e"),s=a("feb2");a("817d");var l={mixins:[s["default"]],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"350px"},autoResize:{type:Boolean,default:!0},chartData:{type:Object,required:!0}},data:function(){return{chart:null}},watch:{chartData:{deep:!0,handler:function(t){this.setOptions(t)}}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=r["init"](this.$el,"macarons"),this.setOptions(this.chartData)},setOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.xData,a=t.yData;this.chart.setOption({xAxis:{data:e,boundaryGap:!1,axisTick:{show:!1}},grid:{left:10,right:10,bottom:20,top:30,containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},yAxis:{axisTick:{show:!1}},series:[{name:"问题数量",itemStyle:{normal:{color:"#FF005A",lineStyle:{color:"#FF005A",width:2}}},smooth:!0,type:"line",data:a,animationDuration:2800,animationEasing:"cubicInOut"}]})}}},o=l,c=a("2877"),d=Object(c["a"])(o,i,n,!1,null,null,null);e["default"]=d.exports},ed08:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("53ca"),a("ac1f"),a("5319"),a("14d9"),a("a15b"),a("d81d"),a("b64b"),a("d3b7"),a("159b"),a("fb6a"),a("d9e2"),a("a630"),a("3ca3"),a("6062"),a("ddb0"),a("25f0"),a("466d"),a("4d63"),a("c607"),a("2c3e"),a("00b4"),a("c38a");function i(t,e,a){var i,n,r,s,l,o=function o(){var c=+new Date-s;c<e&&c>0?i=setTimeout(o,e-c):(i=null,a||(l=t.apply(r,n),i||(r=n=null)))};return function(){for(var n=arguments.length,c=new Array(n),d=0;d<n;d++)c[d]=arguments[d];r=this,s=+new Date;var u=a&&!i;return i||(i=setTimeout(o,e)),u&&(l=t.apply(r,c),r=c=null),l}}},ed36:function(t,e,a){t.exports=a.p+"static/img/house.8386a32d.png"},feb2:function(t,e,a){"use strict";a.r(e);var i=a("ed08");e["default"]={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){this.initListener()},activated:function(){this.$_resizeHandler||this.initListener(),this.resize()},beforeDestroy:function(){this.destroyListener()},deactivated:function(){this.destroyListener()},methods:{$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},initListener:function(){var t=this;this.$_resizeHandler=Object(i["a"])((function(){t.resize()}),100),window.addEventListener("resize",this.$_resizeHandler),this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},destroyListener:function(){window.removeEventListener("resize",this.$_resizeHandler),this.$_resizeHandler=null,this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)},resize:function(){var t=this.chart;t&&t.resize()}}}}}]);