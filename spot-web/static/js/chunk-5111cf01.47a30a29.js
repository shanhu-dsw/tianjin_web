(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5111cf01"],{"0c6d":function(e,t,i){},"1c59":function(e,t,i){"use strict";var n=i("6d61"),r=i("6566");n("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r)},"25aa":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"component-upload-image"},[i("el-upload",{attrs:{action:"#","auto-upload":!1,"file-list":e.uploadList2,"on-change":e.onChangeUpload,"on-remove":e.handlerRemoveImage,"before-remove":e.handlerBeforeRemove,"on-exceed":e.onUpdateExceed,drag:"",multiple:"",limit:e.limit}},[i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或"),i("em",[e._v("点击上传")])])]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 请上传 "),e.fileSize?[e._v(" 大小不超过 "),i("b",{staticStyle:{color:"#f56c6c"}},[e._v(e._s(e.fileSize)+"MB")])]:e._e(),e.fileType?[e._v(" 格式为 "),i("b",{staticStyle:{color:"#f56c6c"}},[e._v(e._s(e.fileType.join("/")))])]:e._e(),e._v(" 的文件 ")],2)],1)},r=[],o=i("c7eb"),a=i("1da1"),s=(i("a9e3"),i("4de4"),i("d3b7"),i("b0c0"),i("14d9"),i("fb6a"),i("a15b"),i("3e8f"),{props:{uploadList:[String,Object,Array],limit:{type:Number,default:5},fileSize:{type:Number,default:5},fileType:{type:Array,default:function(){return["png","jpg","jpeg","doc","docx","xls","xlsx","pdf","zip"]}}},computed:{},data:function(){return{uploadList2:[]}},methods:{onChangeUpload:function(e,t){console.log(e);var i=this.validateFile(e);if(!i)return this.uploadList2=this.uploadList2.filter((function(t){return t.uid!==e.uid})),!1;var n=this,r=new FileReader;r.readAsDataURL(e.raw),r.onload=function(t){e.content=r.result,e.suffix=e.name.substring(e.name.lastIndexOf(".")+1).toUpperCase(),n.uploadList2.push(e),n.$emit("update:uploadList",n.uploadList2)}},handlerRemoveImage:function(e,t){var i=this;return Object(a["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:i.uploadList2=i.uploadList2.filter((function(t){return t.uid!==e.uid})),i.$emit("update:uploadList",i.uploadList2);case 2:case"end":return t.stop()}}),t)})))()},handlerBeforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},onUpdateExceed:function(){this.$modal.msgError("上传文件数量不能超过 ".concat(this.limit," 个!"))},validateFile:function(e){var t=!1,i="";if(e.name.lastIndexOf(".")>-1&&(i=e.name.slice(e.name.lastIndexOf(".")+1)),t=this.fileType.some((function(e){return!!(i&&i.indexOf(e)>-1)})),!t)return this.$modal.msgError("文件格式不正确, 请上传".concat(this.fileType.join("/"),"格式文件!")),!1;if(this.fileSize){var n=e.size/1024/1024<this.fileSize;if(!n)return this.$modal.msgError("上传文件大小不能超过 ".concat(this.fileSize," MB!")),!1}return!0}}}),u=s,l=(i("6d25"),i("2877")),d=Object(l["a"])(u,n,r,!1,null,"ac32e658",null);t["a"]=d.exports},"3e8f":function(e,t){},"4ec9":function(e,t,i){i("6f48")},"4fad":function(e,t,i){var n=i("d039"),r=i("861d"),o=i("c6b6"),a=i("d86b"),s=Object.isExtensible,u=n((function(){s(1)}));e.exports=u||a?function(e){return!!r(e)&&((!a||"ArrayBuffer"!=o(e))&&(!s||s(e)))}:s},6062:function(e,t,i){i("1c59")},6566:function(e,t,i){"use strict";var n=i("9bf2").f,r=i("7c73"),o=i("6964"),a=i("0366"),s=i("19aa"),u=i("7234"),l=i("2266"),d=i("c6d2"),c=i("4754"),f=i("2626"),p=i("83ab"),m=i("f183").fastKey,h=i("69f3"),_=h.set,v=h.getterFor;e.exports={getConstructor:function(e,t,i,d){var c=e((function(e,n){s(e,f),_(e,{type:t,index:r(null),first:void 0,last:void 0,size:0}),p||(e.size=0),u(n)||l(n,e[d],{that:e,AS_ENTRIES:i})})),f=c.prototype,h=v(t),b=function(e,t,i){var n,r,o=h(e),a=y(e,t);return a?a.value=i:(o.last=a={index:r=m(t,!0),key:t,value:i,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=a),n&&(n.next=a),p?o.size++:e.size++,"F"!==r&&(o.index[r]=a)),e},y=function(e,t){var i,n=h(e),r=m(t);if("F"!==r)return n.index[r];for(i=n.first;i;i=i.next)if(i.key==t)return i};return o(f,{clear:function(){var e=this,t=h(e),i=t.index,n=t.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete i[n.index],n=n.next;t.first=t.last=void 0,p?t.size=0:e.size=0},delete:function(e){var t=this,i=h(t),n=y(t,e);if(n){var r=n.next,o=n.previous;delete i.index[n.index],n.removed=!0,o&&(o.next=r),r&&(r.previous=o),i.first==n&&(i.first=r),i.last==n&&(i.last=o),p?i.size--:t.size--}return!!n},forEach:function(e){var t,i=h(this),n=a(e,arguments.length>1?arguments[1]:void 0);while(t=t?t.next:i.first){n(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!y(this,e)}}),o(f,i?{get:function(e){var t=y(this,e);return t&&t.value},set:function(e,t){return b(this,0===e?0:e,t)}}:{add:function(e){return b(this,e=0===e?0:e,e)}}),p&&n(f,"size",{get:function(){return h(this).size}}),c},setStrong:function(e,t,i){var n=t+" Iterator",r=v(t),o=v(n);d(e,t,(function(e,t){_(this,{type:n,target:e,state:r(e),kind:t,last:void 0})}),(function(){var e=o(this),t=e.kind,i=e.last;while(i&&i.removed)i=i.previous;return e.target&&(e.last=i=i?i.next:e.state.first)?c("keys"==t?i.key:"values"==t?i.value:[i.key,i.value],!1):(e.target=void 0,c(void 0,!0))}),i?"entries":"values",!i,!0),f(t)}}},6964:function(e,t,i){var n=i("cb2d");e.exports=function(e,t,i){for(var r in t)n(e,r,t[r],i);return e}},"6d25":function(e,t,i){"use strict";i("0c6d")},"6d61":function(e,t,i){"use strict";var n=i("23e7"),r=i("da84"),o=i("e330"),a=i("94ca"),s=i("cb2d"),u=i("f183"),l=i("2266"),d=i("19aa"),c=i("1626"),f=i("7234"),p=i("861d"),m=i("d039"),h=i("1c7e"),_=i("d44e"),v=i("7156");e.exports=function(e,t,i){var b=-1!==e.indexOf("Map"),y=-1!==e.indexOf("Weak"),g=b?"set":"add",x=r[e],L=x&&x.prototype,w=x,E={},S=function(e){var t=o(L[e]);s(L,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(y&&!p(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return y&&!p(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(y&&!p(e))&&t(this,0===e?0:e)}:function(e,i){return t(this,0===e?0:e,i),this})},T=a(e,!c(x)||!(y||L.forEach&&!m((function(){(new x).entries().next()}))));if(T)w=i.getConstructor(t,e,b,g),u.enable();else if(a(e,!0)){var C=new w,k=C[g](y?{}:-0,1)!=C,O=m((function(){C.has(1)})),j=h((function(e){new x(e)})),U=!y&&m((function(){var e=new x,t=5;while(t--)e[g](t,t);return!e.has(-0)}));j||(w=t((function(e,t){d(e,L);var i=v(new x,e,w);return f(t)||l(t,i[g],{that:i,AS_ENTRIES:b}),i})),w.prototype=L,L.constructor=w),(O||U)&&(S("delete"),S("has"),b&&S("get")),(U||k)&&S(g),y&&L.clear&&delete L.clear}return E[e]=w,n({global:!0,constructor:!0,forced:w!=x},E),_(w,e),y||i.setStrong(w,e,b),w}},"6f48":function(e,t,i){"use strict";var n=i("6d61"),r=i("6566");n("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r)},"861a":function(e,t,i){},bb2f:function(e,t,i){var n=i("d039");e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},d849:function(e,t,i){"use strict";i("861a")},d86b:function(e,t,i){var n=i("d039");e.exports=n((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},df30:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"app-container"},[i("el-row",[i("el-col",[i("el-card",[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{"font-weight":"bold",color:"#016dbe"}},[e._v("录入问题")])]),i("div",{staticStyle:{display:"flex"}},[i("div",{staticStyle:{display:"flex",flex:"1"}},[i("el-form",{ref:"form",staticStyle:{width:"100%"},attrs:{"label-position":"top",model:e.form,rules:e.rules}},[i("el-row",{attrs:{gutter:30}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"被检查单位类别",prop:"dept_uuid_type"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"被选择被检查单位类别",filterable:""},on:{change:e.deptTypeSelChange},model:{value:e.form.dept_uuid_type,callback:function(t){e.$set(e.form,"dept_uuid_type",t)},expression:"form.dept_uuid_type"}},e._l(e.deptList1,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"被检查问题单位",prop:"to_uuid"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"被选择检查问题单位",filterable:""},on:{change:e.deptSelChange},model:{value:e.form.to_uuid,callback:function(t){e.$set(e.form,"to_uuid",t)},expression:"form.to_uuid"}},e._l(e.deptList2,(function(e){return i("el-option",{key:e.uuid,attrs:{label:e.name,value:e.uuid}})})),1)],1)],1)],1),i("el-row",{attrs:{gutter:30}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"问题类型",prop:"problem_type"}},[i("el-radio-group",{on:{input:e.typeSelChange},model:{value:e.form.problem_type,callback:function(t){e.$set(e.form,"problem_type",t)},expression:"form.problem_type"}},e._l(e.problemType1,(function(t){return i("el-radio-button",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.name))])})),1),i("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[e._v("派出所只能选择“自查问题”；"),i("br"),e._v("直属单位可以选择“自查问题”和“检查问题”。")]),i("i",{staticClass:"el-icon-warning",staticStyle:{color:"#009cff","margin-left":"5px"}})])],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"问题子类",prop:"type_uuid"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择问题分类",clearable:"",filterable:""},model:{value:e.form.type_uuid,callback:function(t){e.$set(e.form,"type_uuid",t)},expression:"form.type_uuid"}},e._l(e.problemType3,(function(e){return i("el-option",{key:e.uuid,attrs:{label:e.name,value:e.uuid}})})),1)],1)],1)],1),i("el-row",{attrs:{gutter:30}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"问题负责人"}},[i("el-select",{staticStyle:{width:"90%"},attrs:{filterable:"",remote:"",multiple:"",placeholder:"请输入姓名或警号","remote-method":e.remotePerson1,clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.form.to_uuid_person,callback:function(t){e.$set(e.form,"to_uuid_person",t)},expression:"form.to_uuid_person"}},e._l(e.personList1,(function(e){return i("el-option",{key:e.uuid,attrs:{label:e.name+"-"+e.real_name,value:e.uuid}})})),1),i("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[e._v("可以输入警号或者姓名，也可以输入多个责任人；"),i("br"),e._v("如果没有指定的责任人，可以不填。")]),i("i",{staticClass:"el-icon-warning",staticStyle:{color:"#009cff","margin-left":"5px"}})])],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"问题通知人",prop:"to_uuid_message"}},[i("el-select",{staticStyle:{width:"90%"},attrs:{filterable:"",remote:"",multiple:"",placeholder:"请输入关键词","remote-method":e.remotePerson2},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.form.to_uuid_message,callback:function(t){e.$set(e.form,"to_uuid_message",t)},expression:"form.to_uuid_message"}},e._l(e.personList2,(function(e){return i("el-option",{key:e.uuid,attrs:{label:e.name+("0"==e.uuid?"":"_")+e.real_name,value:e.uuid}})})),1),i("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[e._v("问题会默认推送给被创建问题单位的领导和管理员。")]),i("i",{staticClass:"el-icon-warning",staticStyle:{color:"#009cff","margin-left":"5px"}})])],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"督导检查时间"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择日期时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.form.create_datetime,callback:function(t){e.$set(e.form,"create_datetime",t)},expression:"form.create_datetime"}})],1)],1)],1),i("el-row",{attrs:{gutter:30}},[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"问题描述",prop:"content"}},[i("el-input",{attrs:{type:"textarea",rows:"5",placeholder:"请输入内容",maxlength:"5000","show-word-limit":""},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"问题附件"}},[i("ZMUpload",{attrs:{uploadList:e.beforeUpdateImg},on:{"update:uploadList":function(t){e.beforeUpdateImg=t},"update:upload-list":function(t){e.beforeUpdateImg=t}}})],1)],1)],1),i("el-form-item",[i("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:e.onSubmit}},[e._v("确定")]),i("el-button",{attrs:{type:"info",icon:"el-icon-close"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1),i("div",{staticClass:"help"},[i("h3",{staticStyle:{"text-align":"center"}},[e._v("使用帮助")]),i("p",[e._v("1、创建自查问题的权限：派出所领导、管理员；支队领导、管理员。 创建检查问题的权限：支队领导、管理员、民警。")]),i("p",[e._v("2、自查问题：是对单位内部进行检查。")]),i("p",[e._v("3、检查问题：是对其他单位创建问题。")]),i("p",[e._v("4、问题责任人：指的是这个问题的承担者，要为这个问题承担后果。")]),i("p",[e._v("5、如遇到问题可以点击“消息通知”——“发送信息给管理员”，把遇到的问题发送给管理员。")])])])])],1)],1)],1)},r=[],o=i("2909"),a=i("b85c"),s=i("c7eb"),u=i("1da1"),l=i("5530"),d=(i("14d9"),i("d3b7"),i("4ec9"),i("3ca3"),i("ddb0"),i("4de4"),i("159b"),i("b0c0"),i("ac1f"),i("5319"),i("a15b"),i("d81d"),i("99af"),i("6062"),i("2f62")),c=i("25aa"),f=i("9d9a"),p={computed:Object(l["a"])({},Object(d["b"])(["admin"])),components:{ZMUpload:c["a"]},data:function(){return{loading:!1,form:{to_uuid:void 0,type_uuid:void 0,to_uuid_message:[],content:void 0,problem_type:void 0,create_datetime:void 0,dept_uuid_type:void 0,to_uuid_person:[]},rules:{to_uuid:[{required:!0,message:"被检查问题单位不能为空",trigger:"blur"}],problem_type:[{required:!0,message:"问题类型不能为空",trigger:"blur"}],type_uuid:[{required:!0,message:"问题子类不能为空",trigger:"blur"}],to_uuid_message:[{required:!0,message:"问题通知人不能为空",trigger:"blur"}],content:[{required:!0,message:"问题描述不能为空",trigger:"blur"}]},deptList0:[],deptList11:[],deptList1:[],deptList2:[],userList1:[],userList2:[],personList1:[],personList2:[],manageUser:[],beforeUpdateImg:[],problemType1:[{name:"检查问题",value:"CHECK"},{name:"自查问题",value:"SELF"}],problemType2:[],problemType3:[],adminProblemType:{CHECK:[],SELF:[]}}},created:function(){if(console.log(this.admin),"fu_jing"==this.admin.role_name||"min_jing"==this.admin.role_name)return this.$modal.msgError("您无此权限访问!"),void this.$router.push("/index");this.form.create_datetime=this.parseTime(new Date),this.getInfo()},methods:{getInfo:function(){var e=this;return Object(u["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.getDepartmentList();case 3:return t.next=5,e.getAllProblemTypeList();case 5:return t.next=7,e.getUserList2();case 7:e.loading=!1;case 8:case"end":return t.stop()}}),t)})))()},getDepartmentList:function(){var e=this;return new Promise((function(t){var i={level:2};"派出所"==e.admin.department_uuid2_type&&(i.uuid=e.admin.department_uuid2),Object(f["q"])(i).then((function(i){e.deptList0=i.array;var n,r=new Map,s=Object(a["a"])(i.array);try{for(s.s();!(n=s.n()).done;){var u=n.value;r.set(u.type_name,u.type_name)}}catch(c){s.e(c)}finally{s.f()}if(e.deptList1=Object(o["a"])(r.values()),e.deptList11=Object(o["a"])(e.deptList1),"分局"==e.admin.department_uuid2_type)return t("next");var l=e.deptList0.filter((function(t){return t.uuid==e.admin.department_uuid2}));if(l.length<1)return t("next");var d=l[0].problem_types;return d.forEach((function(t){if(1==t.level){var i=[];d.forEach((function(e){t.uuid==e.parent_uuid&&i.push(e)})),"检查问题"==t.name&&(e.adminProblemType.CHECK=i),"自查问题"==t.name&&(e.adminProblemType.SELF=i)}})),t("next")}))}))},getAllProblemTypeList:function(){var e=this;return new Promise((function(t){Object(f["A"])().then((function(i){return e.problemType2=i.array,console.log(i.array),"superadmin"!=e.admin.role_name&&"admin"!=e.admin.role_name&&"ds_admin"!=e.admin.role_name||e.problemType2.forEach((function(t){if(1==t.level){var i=[];e.problemType2.forEach((function(e){t.uuid==e.parent_uuid&&i.push(e)})),"检查问题"==t.name&&(e.adminProblemType.CHECK=i),"自查问题"==t.name&&(e.adminProblemType.SELF=i)}})),"派出所"==e.admin.department_uuid2_type?e.typeSelChange(e.problemType1[1].value):e.typeSelChange(e.problemType1[0].value),t("next")}))}))},getUserList1:function(e){var t=this,i={rows:1e3,offset:0,all_from_department_uuid:e};Object(f["o"])(i).then((function(e){t.userList1=e.array}));var n={offset:0,rows:1e3,manage_department_uuid_like:e};Object(f["o"])(n).then((function(e){t.manageUser=e.array}))},getUserList2:function(){var e=this;return new Promise((function(t){var i={rows:9999,offset:0};Object(f["o"])(i).then((function(i){return e.userList2=i.array,t("next")}))}))},deptTypeSelChange:function(e){var t=this;this.form.dept_uuid_type=e,console.log(this.deptList0),this.deptList2=this.deptList0.filter((function(t){return t.type_name==e})),"CHECK"==this.form.problem_type&&(this.deptList2=this.deptList2.filter((function(e){return e.uuid!=t.admin.department_uuid2}))),this.form.to_uuid="",this.form.to_uuid_person=[],this.personList1=[],this.personList2=[],this.manageUser=[]},deptSelChange:function(e){this.resetDept(),this.getUserList1(e),this.personList2=[{uuid:"0",real_name:"部门负责人",name:""}],this.form.to_uuid_message=["0"]},typeSelChange:function(e){var t=this;this.problemType3=[],this.form.problem_type=e,this.form.type_uuid="","分局"==this.admin.department_uuid2_type?"CHECK"==e&&(this.problemType3=this.adminProblemType.CHECK,console.log(this.problemType3),this.problemType3.forEach((function(e){e.name=e.name.replace(/u201c/g,"“"),e.name=e.name.replace(/u201d/g,"”"),e.name=e.name.replace(/u2014/g,"-")}))):"派出所"==this.admin.department_uuid2_type?"SELF"==e&&(this.problemType3=this.adminProblemType.SELF,console.log(this.problemType3),this.problemType3.forEach((function(e){e.name=e.name.replace(/u201c/g,"“"),e.name=e.name.replace(/u201d/g,"”"),e.name=e.name.replace(/u2014/g,"-")}))):"zd_admin"==this.admin.role_name?"CHECK"==e&&(this.problemType3=this.adminProblemType.CHECK,this.problemType3.forEach((function(e){e.name=e.name.replace(/u201c/g,"“"),e.name=e.name.replace(/u201d/g,"”"),e.name=e.name.replace(/u2014/g,"-")}))):(this.problemType3=this.adminProblemType[e],this.problemType3.forEach((function(e){e.name=e.name.replace(/u201c/g,"“"),e.name=e.name.replace(/u201d/g,"”"),e.name=e.name.replace(/u2014/g,"-")}))),"SELF"==e&&"分局"!=this.admin.department_uuid2_type&&(this.deptList1=[this.admin.department_uuid2_type],this.deptList2=this.deptList0.filter((function(e){return e.uuid==t.admin.department_uuid2})),this.form.dept_uuid_type=this.admin.department_uuid2_type,this.form.to_uuid=this.admin.department_uuid2,this.deptSelChange(this.form.to_uuid)),"CHECK"==e&&"分局"!=this.admin.department_uuid2_type&&(this.deptList1=Object(o["a"])(this.deptList11),this.deptList2=[],this.form.dept_uuid_type=void 0,this.form.to_uuid=void 0,this.resetDept())},resetDept:function(){this.form.to_uuid_message=[],this.form.to_uuid_person=[],this.manageUser=[],this.personList1=[],this.personList2=[]},remotePerson1:function(e){var t=this,i=0;this.personList1=[],this.userList1.forEach((function(n){(-1!=n.real_name.indexOf(e)&&i<=20||-1!=n.name.indexOf(e)&&i<=20)&&(t.personList1.push(n),i++)}))},remotePerson2:function(e){var t=this,i=0;this.personList2=[{uuid:"0",real_name:"部门负责人",name:""}],console.log(this.userList2),this.userList2.forEach((function(n){(-1!=n.real_name.indexOf(e)&&i<=20||-1!=n.name.indexOf(e)&&i<=20)&&(t.personList2.push(n),i++)}))},reset:function(){this.form={to_uuid:void 0,type_uuid:void 0,to_uuid_message:void 0,content:void 0,problem_type:void 0,create_datetime:this.parseTime(new Date)},this.deptList2=[],this.personList1=[],this.personList2=[],this.manageUser=[],this.resetForm("form")},onSubmit:function(){var e=this;this.form.from_uuid=this.admin.uuid,this.form.type="DEPARTMENT",this.form.from_lv2_department_uuid=this.admin.department_uuid2,this.form.to_lv2_department_uuid=this.form.to_uuid,console.log(this.form.content),this.form.to_uuid_person.length>0&&(this.form.responsible_uuids=this.form.to_uuid_person.join(";")),this.beforeUpdateImg.length>0&&(this.form.file_content=this.beforeUpdateImg.map((function(e){return e.content})).join("|"),this.form.file_suffix=this.beforeUpdateImg.map((function(e){return e.suffix})).join("|")),this.$refs["form"].validate((function(t){t&&(e.loading=!0,e.form.content=e.htmlEncode(e.form.content),Object(f["e"])(e.form).then((function(t){e.sendMsg(t.uuid)})).catch((function(t){e.loading=!1})))}))},sendMsg:function(e){var t=this,i=this.deptList2.filter((function(e){return e.uuid==t.form.to_uuid}))[0].name,n=this.parseTime(new Date,"{y}-{m}-{d}");this.form.create_datetime&&(n=this.parseTime(this.form.create_datetime,"{y}-{m}-{d}"));var r=this.problemType3.filter((function(e){return e.uuid==t.form.type_uuid}))[0].name,a=this.admin.real_name+"("+this.admin.name+")",s=i+",于“"+n+"”被“"+a+"”发现“"+r+"”的问题，请及时整改。",u={from_uuid:this.admin.uuid,to_uuid:"",title:"发现"+r+"的问题",content:s,remark:e},l=[];this.manageUser.length>0&&(l=l.concat(this.manageUser.map((function(e){return e.uuid})))),this.form.to_uuid_message.length>0&&(l=l.concat(this.form.to_uuid_message)),this.form.to_uuid_person.length>0&&(l=l.concat(this.form.to_uuid_person));var d=Object(o["a"])(new Set(l));console.log(d),d.forEach((function(e){"0"!=e&&(u.to_uuid=e,Object(f["d"])(u).then((function(e){})))})),setTimeout((function(){t.loading=!1,t.$router.push("/problem/list")}),2e3)}}},m=p,h=(i("d849"),i("2877")),_=Object(h["a"])(m,n,r,!1,null,"3c120a0e",null);t["default"]=_.exports},f183:function(e,t,i){var n=i("23e7"),r=i("e330"),o=i("d012"),a=i("861d"),s=i("1a2d"),u=i("9bf2").f,l=i("241c"),d=i("057f"),c=i("4fad"),f=i("90e3"),p=i("bb2f"),m=!1,h=f("meta"),_=0,v=function(e){u(e,h,{value:{objectID:"O"+_++,weakData:{}}})},b=function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,h)){if(!c(e))return"F";if(!t)return"E";v(e)}return e[h].objectID},y=function(e,t){if(!s(e,h)){if(!c(e))return!0;if(!t)return!1;v(e)}return e[h].weakData},g=function(e){return p&&m&&c(e)&&!s(e,h)&&v(e),e},x=function(){L.enable=function(){},m=!0;var e=l.f,t=r([].splice),i={};i[h]=1,e(i).length&&(l.f=function(i){for(var n=e(i),r=0,o=n.length;r<o;r++)if(n[r]===h){t(n,r,1);break}return n},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:d.f}))},L=e.exports={enable:x,fastKey:b,getWeakData:y,onFreeze:g};o[h]=!0}}]);